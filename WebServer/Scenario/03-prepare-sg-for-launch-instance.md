## インスタンス起動の準備

これまでの手順で、インスタンスを接続するネットワークが準備できましたので、ここでは、インスタンス起動前の準備を行います。

### セキュリティグループの作成
AWSにおいてファイアーウォールの役割を果たす、セキュリティグループの作成を行います。  

マネジメントコンソールのトップ画面から、「EC2」アイコンをクリックし、EC2ダッシュボード画面を開きます。  
そして、左側のリストから「セキュリティグループ」をクリックし、セキュリティグループ一覧画面を開きます。

[![https://gyazo.com/542062d7c6a4aa95fc93b27ea4ac9de9](https://i.gyazo.com/542062d7c6a4aa95fc93b27ea4ac9de9.png)](https://gyazo.com/542062d7c6a4aa95fc93b27ea4ac9de9)

左上の「セキュリティグループの作成」ボタンをクリックすると、「セキュリティグループの作成」ウィザードが表示されます。  

「セキュリティグループの作成」ウィザードにて、上部の必要項目を下表に従い入力します。  
※本シナリオでは、XXの部分は自身のユーザ名の下二ケタを設定してください。  
（なお、入力値は任意のものであっても問題ありません。）

| 項目 | 設定値 
|:-----------|:------------| 
| セキュリティグループ名 | userXX
| 説明 | WEB&SSH
| VPC | 先ほど作成したVPCを選択

[![https://gyazo.com/b109a3bb3e6c13a97e05c169b4878759](https://i.gyazo.com/b109a3bb3e6c13a97e05c169b4878759.png)](https://gyazo.com/b109a3bb3e6c13a97e05c169b4878759)


入力が完了したら、インバウンドルールの設定に移ります。

## インバウンドルールの設定

外部ネットワークからセキュリティグループ内の仮想インスタンスに対して、HTTP、SSH、ICMPでのアクセスが可能なように設定します。

先ほどと同じウィザードにて、「インバウンド」タブが選択されていることを確認します。
今は設定前なので、何も設定されていません。

[![https://gyazo.com/75672a5d0d89fe5ff11c47eeed1d9222](https://i.gyazo.com/75672a5d0d89fe5ff11c47eeed1d9222.png)](https://gyazo.com/75672a5d0d89fe5ff11c47eeed1d9222)

「ルール追加」ボタンをクリックし、必要項目を下表に従い入力します。  
※必要なルールを複数作成する場合は、「ルールの追加」をクリックし、入力フィールドを増やしてください。

#### ICMPの許可

| 項目 | 設定値 
|:-----------|:------------
| タイプ | すべてのICMP
| プロトコル | ICMP
| ポート範囲 | 0 - 65535
| 送信元 | 任意の場所

#### HTTPの許可

| 項目 | 設定値 
|:-----------|:------------
| タイプ | HTTP
| プロトコル | TCP 
| ポート範囲 | 80
| 送信元 | 任意の場所

#### SSHの許可

| 項目 | 設定値 
|:-----------|:------------
| タイプ | SSH 
| プロトコル | TCP
| ポート範囲 | 22
| 送信元 | 任意の場所

[![https://gyazo.com/1b8c7e4d7a71c50f7c138429b4740e9e](https://i.gyazo.com/1b8c7e4d7a71c50f7c138429b4740e9e.png)](https://gyazo.com/1b8c7e4d7a71c50f7c138429b4740e9e)

すべての設定が完了したら「作成」ボタンをクリックし、ルールを保存してください。

一覧に作成したセキュリティグループが表示され、  
設定した3つのルールすべてが「インバウンドルール」タブの画面に表示されれば、設定完了です。

[![https://gyazo.com/74c93448444c540000f1474a1dfde4a1](https://i.gyazo.com/74c93448444c540000f1474a1dfde4a1.png)](https://gyazo.com/74c93448444c540000f1474a1dfde4a1)


[次:キーペアの作成へ](https://github.com/yoshirako/aws-handson-scenario/blob/master/WebServer/Scenario/04-prepare-key-for-launch-instance.md)
